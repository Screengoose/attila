Router.configure({  layoutTemplate: 'layout',  loadingTemplate: 'loading',  notFoundTemplate: 'notFound'});Router.map(function() {  var loginCode =  function () {    if (! Meteor.userId()) {      this.render('login');    } else {      this.next();    }  }  this.route('login', {    path: '/login',    onAfterAction: function () {      if ( Meteor.user() || Meteor.loggingIn()) {        Meteor.setTimeout(function() {          Router.go('home');        }, 100);        console.log('user: ' + Meteor.user() + ' logging: ' + Meteor.loggingIn());      }    }  });  this.route('home', {    path: '/',    onBeforeAction: loginCode    });  this.route('profile', {    path: '/profile',    onBeforeAction: loginCode  });  this.route('editProfile', {    path: '/editprofile',    onBeforeAction: loginCode  });  this.route('fyters', {    path: '/fyters',    onBeforeAction: loginCode  });});